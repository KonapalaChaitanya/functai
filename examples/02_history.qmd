---
title: "FunctAI: Inspecting Provider History"
format:
  html:
    code-fold: true
---

This example shows how to view the exact messages that were sent to the provider via DSPy after a call.

Prereqs:

- Install this repo (e.g., `uv pip install -e .`)
- Set your provider API key (e.g., `export OPENAI_API_KEY=...`)

```python
from functai import magic, step, final, inspect_history_text
from typing import List

@magic(adapter="json", lm="gpt-4.1")
def analyze(text: str) -> dict:
    _sentiment: str = step("Determine sentiment")
    _keywords: List[str] = step("Extract keywords")
    summary: dict = final("Combine analysis")
    return summary

res = analyze("FunctAI makes AI programming fun and easy!")

# View provider-level history captured by DSPy
print(inspect_history_text())
```

Notes:

- `inspect_history_text()` captures the output of `dspy.inspect_history()` into a string for convenience.
- For agentic modules (e.g., ReAct), the history includes the full tool-use trajectory.

